var arAnchor=0===$("#postAr").length||0===$(".headerlink").length||$(window).width()<900?function(){}:function(){var o=$(".post-content").find(".headerlink"),s=$('<div class="arCatalog"><div class="arCatalog-line"></div><div class="arCatalog-list"><dl></dl></div>'),i=1,d=1;o.each(function(a){var n=$(this),t="",e=$('<dd><span class="arCatalog-index"></span><a></a><span class="arCatalog-dot"></span></dd>');"H3"===o[a].parentElement.tagName?(t=--i+"."+d++,e.addClass("arCatalog-tack2")):(t=i,d=1,e.addClass("arCatalog-tack1")),i++,e.find(".arCatalog-index").text(t),e.find("a").attr("href","#"),e.find("a").text(n[0].title),e.appendTo(s.find("dl")[0])});var a=parseInt(((document.all?"CSS1Compat"==document.compatMode?document.documentElement.clientHeight:document.body.clientHeight:self.innerHeight)-180)/28),n=o.length>a?28*a+10:28*o.length+10;s.find(".arCatalog-line").css("height",n),s.find(".arCatalog-list").css("maxHeight",n-10),s.find("dd").eq(0).addClass("on"),s.appendTo($("#arAnchorBar")[0]);var r=o.length,t=s.find("dd"),c=t[0].offsetHeight||0;viewRange=[];var e=t.offset().top-f(),l=e+8*c-c/2;function f(){return document.body.scrollTop+document.documentElement.scrollTop}viewRange.push(e),viewRange.push(l),$(window).scroll(function(){o.each(function(a){$(this).offset().top-82<=f()&&(s.find("dd").removeClass("on"),s.find("dd").eq(a).addClass("on"))}),function(){var a=s.find("dd.on"),n=a.index(),t=a.offset().top-f(),e=s.find(".arCatalog-list"),o=e[0].scrollTop,i=parseInt(o/28);if(t>viewRange[1]){var d=r-n;8<=d?e.animate({scrollTop:c*(i+8)},300,"swing"):d<8&&e.animate({scrollTop:c*(i+d)},300,"swing")}else if(t<viewRange[0]){var l=n;8<=l?e.animate({scrollTop:c*(i-8)},300,"swing"):l<8&&e.animate({scrollTop:0},300,"swing")}}()}),s.find("a").each(function(n){$(this).click(function(a){a.preventDefault(),$("html,body").animate({scrollTop:o.eq(n).offset().top-80},300,"swing")})})};